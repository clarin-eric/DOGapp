{% extends 'UI/_home.html' %}
{%  load dogui_extras %}
{% block result %}
    <div class='table-reponsive'>
        <table id='fetch_result_table'
               class='datatables-table stripe order-column row-border'>
            <thead>
                <tr>
                    <th>PID</th>
                    <th>License</th>
                    <th>Description</th>
                    <th colspan="2">Referenced Resources</th>
                </tr>
            </thead>
            <tbody>
                {% for pid, fetch_res in fetch_response.items %}
                    <tr>
                        <td>{{ pid }}</td>
                        {% if fetch_res %}
                            <td>{{ fetch_res.license }}</td>
                            <td>{{ fetch_res.description }}</td>
                                {% for ref_files in fetch_res.ref_files %}
                                    <td>{{ ref_files.resource_type }}</td>
                                    <td>
                                    {% if ref_files.pid|is_instance:list %}
                                        {% for ref_pid in ref_files.pid %}
                                            <a href="{{ ref_pid }}">{{ ref_pid }}</a>
                                            {% if not forloop.last %}
                                                <br>
                                            {% endif %}
                                        {% endfor %}
                                    {% else %}
                                        <a href="{{ ref_files.pid }}">{{ ref_files.pid }}</a>
                                    {% endif %}
                                    </td>
                                {% endfor %}
                        {% else %}
                            <td>NA</td>
                            <td>NA</td>
                            <td>NA</td>
                            <td></td>
                        {% endif %}
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
{% endblock result%}
